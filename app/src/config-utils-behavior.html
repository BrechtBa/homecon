<script>
    configUtilsBehavior = {


        _configToNewConfigArray: function(config){
            newConfig = []
            for(key in config){
                value = config[key].value;
                if(typeof value == 'object'){
                    value = JSON.stringify(value)
                }
                newConfig.push({'key':key,'value':value})
            }
            return newConfig;
        },

        _newConfigArrayToConfig: function(newconfig){
            var config = {};

            newconfig.forEach(function(property){
                try{
                    var value = JSON.parse(property.value);
                }
                catch(e){
                    var value = property.value;
                }
                config[property.key] = value;
            });

            return config;
        },

        _configToNewConfig: function(config){
            newConfig = {}
            for(key in config){
                value = config[key];
                if(typeof value == 'object'){
                    value = JSON.stringify(value)
                }
                newConfig[key] = value
            }
            return newConfig;
        },

        _newConfigToConfig: function(newconfig){
            var config = {};

            for(key in newconfig){
                try{
                    var value = JSON.parse(newconfig[key]);
                }
                catch(e){
                    var value = newconfig[key];
                }
                config[key] = value;
            }
            return config;
        },

        _configIndex: function(config,key){
            for(var i=0; i<config.length; i++){
                if( config[i].key == key ){
                    return i;
                }
            }
            return -1;
        },

        _configValue: function(config,key){
            var i = this._configIndex(config,key);
            if(i>-1){
                return config[i].value;
            }
            return undefined;
        },

    };
</script>
